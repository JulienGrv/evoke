language: cpp
compiler: gcc
dist: trusty

matrix:
  include:
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-7
            - g++-7-multilib
      env:
        - MATRIX_EVAL="CC=gcc-7 && CXX=g++-7"

before_install:
  - eval "${MATRIX_EVAL}"

install:
  - wget https://dl.bintray.com/boostorg/release/1.64.0/source/boost_1_64_0.tar.bz2
  - tar -xjf boost_1_64_0.tar.bz2
  - cd boost_1_64_0
  - ./bootstrap.sh --with-libraries=filesystem,program_options,system >/dev/null
  - sudo ./b2 install variant=release link=static threading=multi >/dev/null
  - cd ..

script:
  - cmake -E make_directory bin
  - cmake -E chdir bin cmake -D CMAKE_BUILD_TYPE=Release ..
  - cmake --build bin -- -j 4
